<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Formulario con Fetch API</title>
</head>
<body>
  <h1>Confirmación de Invitados</h1>

  <!-- Formulario para capturar datos -->
  <form id="form">
    <input type="text" id="nombre" placeholder="Nombre Completo" required />
    <select id="pais">
      <option value="México">México</option>
      <option value="España">España</option>
      <option value="Argentina">Argentina</option>
    </select>
    <input type="text" id="requerimientos" placeholder="Requerimientos Nutricionales" />
    <button type="submit">Enviar</button>
  </form>

  <!-- Tabla para mostrar la lista de confirmados -->
  <h2>Lista de Confirmados</h2>
  <table>
    <thead>
      <tr>
        <th>Nombre</th>
        <th>País</th>
        <th>Requerimientos</th>
      </tr>
    </thead>
    <tbody id="lista"></tbody>
  </table>

  <!-- JavaScript para conectar el formulario con Google Sheets -->
  <script>
    const apiUrl = "TU_URL_DE_LA_API"; // Reemplaza con tu URL de Google Sheets API

    // Manejo del envío del formulario
    const form = document.getElementById('form');
    form.addEventListener('submit', async (e) => {
      e.preventDefault(); // Evita recargar la página

      // Captura los datos del formulario
      const nombre = document.getElementById('nombre').value;
      const pais = document.getElementById('pais').value;
      const requerimientos = document.getElementById('requerimientos').value;

      // Enviar datos a Google Sheets
      await fetch(apiUrl, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ nombre, pais, requerimientos }),
      });

      alert('Confirmación enviada');
      form.reset(); // Limpia el formulario
      cargarLista(); // Actualiza la tabla
    });

    // Función para cargar la lista de confirmados desde Google Sheets
    async function cargarLista() {
      const response = await fetch(apiUrl); // Solicitud GET
      const data = await response.json(); // Convierte la respuesta en JSON

      // Vacía la tabla antes de actualizarla
      const lista = document.getElementById('lista');
      lista.innerHTML = '';

      // Recorre los datos y los agrega a la tabla
      data.forEach((item) => {
        const row = `<tr>
          <td>${item.nombre}</td>
          <td>${item.pais}</td>
          <td>${item.requerimientos}</td>
        </tr>`;
        lista.innerHTML += row;
      });
    }

    // Carga inicial de la lista
    cargarLista();
  </script>
</body>
</html>
